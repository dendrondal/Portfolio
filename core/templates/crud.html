<!DOCTYPE html>
<html>
	<head>
		<title>Mission Control</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../static/assets/css/main.css" />
        <link rel="icon" href="../static/images/favicon.ico">
		<noscript><link rel="stylesheet" href="../static/assets/css/noscript.css" /></noscript>
	</head>

<body class="is-preload">
    <div class="fa-exclamation">
        {{ msg }}
    </div>

        {% block content %}
        {% if 'edit_entry' in request.url %}
            <div style='margin-left: 100px; width: 45%;'>
            <div class="alert alert-info" role="alert">
             <strong>Edit Post</strong>
            </div>

            {% for page in editables %}
            <form action = "edit" method = "POST">
             <p>Post Title: <input class="form-control" type = "text" name = "title" style='width: 100%;' value='{{page['title']}}'/></p>
             <p>Description: <input class="form-control" type = "text" name = "description" style='width: 100%;' value='{{page['description']}}' /></p>
             <p>Link to post: <input class="form-control" type = "text" name = "symlink" style='width: 100%;' value='{{page['symlink']}}' /></p>
             <p>Thumbnail image symlink: <input class="form-control" type = "text" name = "thumbnail" style='width: 100%;' value='{{page['thumbnail']}}' /></p>
             <p>Post Tags: <input class="form-control" type ="text" name = "tags" style='width: 100%;' value='{{page['tags']}}' /></p>
             <p>Contents: <textarea class="form-control" type ="text" name = "contents" rows=20, cols=80 style='width: 100%;'> value='{{html_to_md(page['content'])}}'</textarea></p>
             <input type ="hidden" name = "old_entry" value='{{page['title']}}' />

             {% endfor %}

             <br>
             <p><input class="btn-primary" type = "submit" value = "Update" /></p>

             </form>
            </div>

        {% else %}
        <div style='margin-left: 100px; width: 45%;'>
        <div class="alert alert-info" role="alert">
        <strong>New Post:</strong>
        </div>

         <form action = "insert" method = "POST">
             <p>Post Title: <input class="form-control" type = "text" name = "title" style='width: 100%;' /></p>
             <p>Description: <input class="form-control" type = "text" name = "description" style='width: 100%;' /></p>
             <p>Link to post: <input class="form-control" type = "text" name = "symlink" style='width: 100%;' /></p>
             <p>Thumbnail image symlink: <input class="form-control" type = "text" name = "thumbnail" style='width: 100%;' /></p>
             <p>Post Tags: <input class="form-control" type ="text" name = "tags" style='width: 100%;'/></p>
             <p>Contents: <textarea class="form-control" type ="text" name = "contents" style='width: 100%;'></textarea>
             </p>

             <p><input class="btn-primary" type = "submit" value = "Submit Post" /></p>
        </form>
        </div>

        {% endif %}
        {% endblock content %}

    <table class="table table-wrapper" style="margin-left: 100px; margin-right: 100px; width: 90%;">
        <thead>
            <tr>
                <th>Post Title</th>
                <th>Link to Post</th>
                <th>Post Tags</th>
            </tr>
        </thead>

        {%  for result in results %}
            <tr>
                <td>{{result['title']}}</td>
                <td>{{result['symlink']}}</td>
                <td>{{result['tags']}}</td>
                <td align="center"><a href = {{ url_for('edit_entry', edit_title=result['title']) }}><i class="fas fa-edit"></i></a></td>
                <td align="center"><a href = {{ url_for('delete_entry', del_title=result['title']) }}><i class="fas fa-trash"></i></a></td>
            </tr>
        {%  endfor %}
    </table>
</body>
